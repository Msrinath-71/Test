# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the action will run. 
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  push:
    branches: [ develop ]
  pull_request:
    branches: [ develop ]
    

       



# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  
  Veracode-Result:
     runs-on: windows-latest
     steps:
      - uses: actions/checkout@v1
      - name: Run the veracode file
        shell: pwsh
        run: | 
           Write-Host "Get App build list"
           
           D:\a\TestTest\Veracode-Scans
               $id= "2c6823bbd50562ed3e88a2acba6e36d9"
               $ky="d352818e85caca72327b268fe670b0d246dfe3e6d1ea4a380ce19eb1bcd37e6df6056dd78c75caff064023aa060b3d9e638662cda665f1df740345f4ea750b95"
                $path= "VeracodeC#API.exe -vid $id  -vkey $ky -action GetBuildList  -appid 464177   -sandboxid  3331502  -outputfilepath D:\a\_temp\getbuild.xml"
               Invoke-Expression -Command "$path"
               
      - name: Upload a Build Artifact
        uses: actions/upload-artifact@v2.2.4
        with:
              # Artifact name
            name: getbuild.xml
            path: Veracode-Scans/
      - name: Download a Build Artifact
        uses: actions/download-artifact@v2.0.10
        with:
    # Artifact name
          name: getbuild.xml
    # Destination path
          path: Veracode-Scans/
   

   
        
          
          
          
    
   

   
 
